---
title: oracle如何查看当前有哪些用户连接到数据库
date: 2019-12-09 15:17:55
tags: sql
---
```sql
-- 查询用户会话
SELECT USERNAME,SERIAL#,SID,STATUS FROM V$SESSION;
SELECT 
	A.SID,B.SPID,A.SERIAL#,A.MACHINE,A.PREV_EXEC_START,A.STATUS,C.SQL_TEXT
FROM
	V$SESSION A,V$PROCESS B,V$SQL C
WHERE
	A.PADDR = B.ADDR
	AND A.PREV_SQL_ID = C.SQL_ID
ORDER BY A.PREV_EXEC_START;
-- 删除相关用户会话(SERIAL#,SID为上方查询结果)
ALTER SYSTEM KILL SESSION 'SERIAL#, SID';
-- 查询oracle连接数
SELECT COUNT(*) FROM V$SESSION;
-- 查询oracle最大连接数
SELECT VALUE FROM V$PARAMETER WHERE NAME = 'processes';
-- 查询oracle的并发连接数
SELECT CPUNT(*) FROM V$SESSION WHERE STATUS = 'ACTIVE';
-- 查看不同用户的连接数
SELECT USERNAME,COUNT(USERNAME) FROM V$SESSION WHERE USERNAME IS NOT NULL GROUP BY USERNAME;
-- 查看所有用户
SELECT * FROM ALL_USERS;
-- 查看用户或角色系统权限(直接赋值给用户或角色的系统权限)
SELECT * FROM DBA_SYS_PRIVS;
SELECT * FROM USER_SYS_PRIVS;
-- 查看角色(只能查看登录用户拥有的角色)所包含的权限
SELECT * FROM ROLE_SYS_PRIVS;

```