---
title: 面试题-nginx
date: 2019-11-07 08:07:43
tags: 面试题
---
1.什么是Nginx
&nbsp;&nbsp;&nbsp;&nbsp;Nginx是一个高性能的HTTP和反向代理服务器，及电子邮件代理服务器，同时也是一个非常高效的反向代理、负载平衡。
<!-- more -->
2.为什么要用Nginx
&nbsp;&nbsp;&nbsp;&nbsp;1.跨平台、配置简单，非阻塞、高并发连接：处理2-3万并发连接数，官方监测能支持5万并发
&nbsp;&nbsp;&nbsp;&nbsp;2.内存消耗小：开启10个nginx才占150M内存 ，nginx处理静态文件好,耗费内存少
&nbsp;&nbsp;&nbsp;&nbsp;3.内置的健康检查功能：如果有一个服务器宕机，会做一个健康检查，再发送的请求就不会发送到宕机的服务器了。重新将请求提交到其他的节点上
&nbsp;&nbsp;&nbsp;&nbsp;4.节省宽带：支持GZIP压缩，可以添加浏览器本地缓存
&nbsp;&nbsp;&nbsp;&nbsp;5.稳定性高：宕机的概率非常小
&nbsp;&nbsp;&nbsp;&nbsp;6.接收用户请求是异步的：浏览器将请求发送到nginx服务器，它先将用户请求全部接收下来，再一次性发送给后端web服务器，极大减轻了web服务器的压力,一边接收web服务器的返回数据，一边发送给浏览器客户端, 网络依赖性比较低，只要ping通就可以负载均衡
&nbsp;&nbsp;&nbsp;&nbsp;7.可以有多台nginx服务器
&nbsp;&nbsp;&nbsp;&nbsp;8.使用dns做负载均衡
&nbsp;&nbsp;&nbsp;&nbsp;9.事件驱动：通信机制采用epoll模型（nio2 异步非阻塞）
3.为什么Nginx性能这么高
&nbsp;&nbsp;&nbsp;&nbsp;得益于它的事件处理机制：异步非阻塞事件处理机制：运用了epoll模型，提供了一个队列，排队解决
4.Nginx是如何处理一个请求的
&nbsp;&nbsp;&nbsp;&nbsp;首先，nginx在启动时，会解析配置文件，得到需要监听的端口与ip地址，然后在nginx的master进程里面先初始化好这个监控的socket，再进行listen,然后再fork出多个子进程出来,  子进程会竞争accept新的连接。此时，客户端就可以向nginx发起连接了。当客户端与nginx进行三次握手，与nginx建立好一个连接后,此时，某一个子进程会accept成功，然后创建nginx对连接的封装，即ngx_connection_t结构体,接着，根据事件调用相应的事件处理模块，如http模块与客户端进行数据的交换。最后，nginx或客户端来主动关掉连接，到此，一个连接就寿终正寝了
5.什么是正向代理
&nbsp;&nbsp;&nbsp;&nbsp;一个位于客户端和原始服务器之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端才能使用正向代理。正向代理总结就一句话：代理端代理的是客户端
6.什么是反向代理
&nbsp;&nbsp;&nbsp;&nbsp;反向代理是指以代理服务器来接受internet上的连接请求，然后将请求，发给内部网络上的服务器,并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。反向代理总结就一句话：代理端代理的是服务端
7.为什么要做动、静分离
&nbsp;&nbsp;&nbsp;&nbsp;在我们的软件开发中，有些请求是需要后台处理的（如：.jsp,.do等等），有些请求是不需要经过后台处理的（如：css、html、jpg、js等等文件）,这些不需要经过后台处理的文件称为静态文件，因此我们后台处理忽略静态文件。这会有人又说那我后台忽略静态文件不就完了吗,当然这是可以的，但是这样后台的请求次数就明显增多了。在我们对资源的响应速度有要求的时候，我们应该使用这种动静分离的策略去解决，动、静分离将网站静态资源（HTML，JavaScript，CSS，img等文件）与后台应用分开部署，提高用户访问静态代码的速度，降低对后台应用访问，这里我们将静态资源放到nginx中，动态资源转发到tomcat服务器中
8.什么是负载均衡
&nbsp;&nbsp;&nbsp;&nbsp;负载均衡即是代理服务器将接收的请求均衡的分发到各服务器中，负载均衡主要解决网络拥塞问题，提高服务器响应速度，服务就近提供，达到更好的访问质量，减少后台服务器大并发压力
